"use strict";(self["webpackChunktemplate"]=self["webpackChunktemplate"]||[]).push([[6534],{6534:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=function(){var e=this,t=e._self._c;return t("div",[t("Card",[t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"edit-head"},[t("a",{staticClass:"back-title",on:{click:e.close}},[t("Icon",{attrs:{type:"ios-arrow-back"}}),e._v("返回 ")],1),t("div",{staticClass:"head-name"},[e._v("添加")]),t("span"),t("a",{staticClass:"window-close",on:{click:e.close}},[t("Icon",{staticClass:"ivu-icon-ios-close",attrs:{type:"ios-close",size:"31"}})],1)])]),t("Form",{ref:"form",attrs:{model:e.form,"label-width":100,rules:e.formValidate,"label-position":"left"}},[t("FormItem",{attrs:{label:"资产名称",prop:"name"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("Button",{attrs:{type:"error"},on:{click:e.openAssetSelectWindow}},[e._v("导入")])],1),t("FormItem",{attrs:{label:"分类",prop:"type"}},[t("Input",{staticStyle:{width:"570px"},attrs:{clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),t("FormItem",{attrs:{label:"规格",prop:"spec"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.spec,callback:function(t){e.$set(e.form,"spec",t)},expression:"form.spec"}})],1),t("FormItem",{attrs:{label:"型号",prop:"model"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}})],1),t("FormItem",{attrs:{label:"尺寸",prop:"cc"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.cc,callback:function(t){e.$set(e.form,"cc",t)},expression:"form.cc"}})],1),t("FormItem",{attrs:{label:"材质",prop:"cz"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.cz,callback:function(t){e.$set(e.form,"cz",t)},expression:"form.cz"}})],1),t("FormItem",{attrs:{label:"使用范围",prop:"syfw"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.syfw,callback:function(t){e.$set(e.form,"syfw",t)},expression:"form.syfw"}})],1),t("FormItem",{attrs:{label:"默认仓库",prop:"mrckName"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.mrckName,callback:function(t){e.$set(e.form,"mrckName",t)},expression:"form.mrckName"}})],1),t("FormItem",{attrs:{label:"采购价",prop:"maxNumber"}},[t("InputNumber",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.maxMoney,callback:function(t){e.$set(e.form,"maxMoney",t)},expression:"form.maxMoney"}})],1),t("FormItem",{attrs:{label:"销售价",prop:"minMoney"}},[t("InputNumber",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.minMoney,callback:function(t){e.$set(e.form,"minMoney",t)},expression:"form.minMoney"}})],1),t("FormItem",{attrs:{label:"供应商",prop:"gysName"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.gysName,callback:function(t){e.$set(e.form,"gysName",t)},expression:"form.gysName"}})],1),t("FormItem",{attrs:{label:"计量单位",prop:"unit"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),t("FormItem",{attrs:{label:"包装单位",prop:"bzdw"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.bzdw,callback:function(t){e.$set(e.form,"bzdw",t)},expression:"form.bzdw"}})],1),t("FormItem",{attrs:{label:"数量",prop:"quantity"}},[t("InputNumber",{staticStyle:{width:"570px"},model:{value:e.form.quantity,callback:function(t){e.$set(e.form,"quantity",t)},expression:"form.quantity"}})],1),t("FormItem",{attrs:{label:"采购原因",prop:"remark"}},[t("Input",{staticStyle:{width:"570px"},attrs:{clearable:""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),t("Form-item",{staticClass:"br"},[t("Button",{attrs:{loading:e.submitLoading,type:"primary"},on:{click:e.handleSubmit}},[e._v("提交并保存")]),t("Button",{on:{click:e.handleReset}},[e._v("重置")]),t("Button",{attrs:{type:"dashed"},on:{click:e.close}},[e._v("关闭")])],1)],1)],1),t("assetSelect",{on:{submited:e.ownerSubmited},model:{value:e.showOwnerWindowFlag,callback:function(t){e.showOwnerWindowFlag=t},expression:"showOwnerWindowFlag"}})],1)},o=[],i=s(4226),r=s(9390);const l={name:"add",components:{assetSelect:r["default"]},data(){return{showOwnerWindowFlag:!1,submitLoading:!1,form:{name:"",type:"",spec:"",model:"",cc:"",cz:"",syfw:"",mrckName:"",maxMoney:1,minMoney:1,gysName:"",unit:"",bzdw:"",quantity:1,quantity2:1,remark:""},formValidate:{}}},methods:{init(){},openAssetSelectWindow(){this.showOwnerWindowFlag=!0},ownerSubmited(e){console.log(e),this.form.name=e.name,this.form.assetId=e.id,this.form.type=e.type,this.form.spec=e.gg,this.form.model=e.xh,this.form.cc=e.cc,this.form.cz=e.cz,this.form.unit=e.jldw,this.form.bzdw=e.bzdw,this.form.syfw=e.syfw,this.form.maxMoney=e.cgj,this.form.minMoney=e.xsj,this.form.gysName=e.gysName,this.form.mrckName=e.mrckName,this.showOwnerWindowFlag=!1},handleReset(){this.$refs.form.resetFields()},handleSubmit(){var e=this;this.$refs.form.validate((t=>{t&&(e.form.quantity2=e.form.quantity,(0,i.oq)(this.form).then((e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.submited())})))}))},minNumber(){this.form.maxMoney<this.form.minMoney&&(this.$Message.warning("最小值不能大于最大值"),this.form.minMoney=this.form.maxMoney),console.log(this.form.minMoney)},maxNumber(){this.form.maxMoney<this.form.minMoney&&(this.$Message.warning("最小值不能大于最大值"),this.form.maxMoney=this.form.minMoney),console.log(this.form.maxMoney)},close(){this.$emit("close",!0)},submited(){this.$emit("submited",!0)}},mounted(){this.init()}},n=l;var m=s(1001),c=(0,m.Z)(n,a,o,!1,null,null,null);const u=c.exports},9390:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=function(){var e=this,t=e._self._c;return t("div",[t("Drawer",{attrs:{title:"导入供应商",closable:"",draggable:"",width:"1400"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("car",[t("Row",[t("Form",{ref:"huasearchForm",attrs:{model:e.huasearchForm,inline:"","label-width":70}},[t("Form-item",{attrs:{label:"供应商名"}},[t("Input",{staticStyle:{width:"400px"},attrs:{type:"text",clearable:"",placeholder:"请输入供应商名"},model:{value:e.huasearchForm.name,callback:function(t){e.$set(e.huasearchForm,"name",t)},expression:"huasearchForm.name"}})],1),t("Form-item",[t("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.huahandleSearch}},[e._v("搜索")]),t("Button",{on:{click:e.huahandleReset}},[e._v("重置")])],1)],1)],1),t("Row",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}]},[t("Alert",{attrs:{"show-icon":""}},[e._v(" 已选择 "),t("span",{staticClass:"select-count"},[e._v(e._s(e.huaselectCount))]),e._v(" 项 "),t("a",{staticClass:"select-clear",on:{click:e.huaclearSelectAll}},[e._v("清空")])])],1),t("Row",[t("Col",{attrs:{span:"24"}},[t("Table",{ref:"table1",attrs:{loading:e.hualoading,border:"",columns:e.userColumns,data:e.huaData,sortable:"custom"},on:{"on-selection-change":e.onSelectionChange,"on-sort-change":e.huachangeSort,"on-row-dblclick":e.huashowHuaSelect}})],1)],1),t("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[t("Page",{attrs:{current:e.huasearchForm.pageNumber,total:e.huaTotal,"page-size":e.huasearchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.huachangePage,"on-page-size-change":e.huachangePageSize}})],1),t("Button",{attrs:{type:"primary"},on:{click:e.huashowHuaSelect}},[e._v("确认选择")])],1)],1)],1)},o=[],i=s(4226);const r={name:"add",components:{},props:{value:{type:Boolean,default:!1},data:{type:Object}},watch:{value(e){this.setCurrentValue(e)},visible(e){this.$emit("input",e)}},data(){return{showValue:!1,visible:this.value,title:"",submitLoading:!1,maxHeight:510,form:{},formValidate:{},roleList:[],userColumns:[{type:"selection",width:60,align:"center"},{title:"资产名称",key:"name",minWidth:100,sortable:!0},{title:"分类",key:"type",minWidth:150,sortable:!0},{title:"规格",key:"gg",sortable:!0,sortType:"desc",minWidth:100},{title:"型号",key:"xh",sortable:!0,sortType:"desc",minWidth:100},{title:"计量单位",key:"jldw",sortable:!0,sortType:"desc",minWidth:100},{title:"采购价",key:"cgj",sortable:!0,sortType:"desc",minWidth:100},{title:"供应商",key:"gysName",sortable:!0,sortType:"desc",minWidth:100}],isImportHuaData:!0,huasearchForm:{pageNumber:1,pageSize:10,username:"",groupId:"",departmentId:""},selectHuaList:[],selectHuaCount:[],huaData:[]}},methods:{onSelectionChange(e){this.selectHuaList=e},init(){this.getHuaUserList()},handleSelectDep(e){var t=this;e.forEach((function(e){t.huasearchForm.departmentId=e.id}))},huashowHuaSelect(){if(0===this.selectHuaList.length)return void this.$Message.warning("请选择至少一个供应商");const e=this.selectHuaList[0];this.$emit("submited",e)},setCurrentValue(e){e!==this.visible&&(this.visible=e)},closeWindow(){this.visible=!1},huahandleSearch(){this.huasearchForm.pageNumber=1,this.huasearchForm.pageSize=10,this.getHuaUserList()},huahandleReset(){this.$refs.huasearchForm.resetFields(),this.huasearchForm.nickname="",this.huasearchForm.pageNumber=1,this.huasearchForm.pageSize=10,that.huasearchForm.departmentId="",this.getHuaUserList()},huaclearSelectAll(){this.$refs.table1.selectAll(!1)},huachangePage(e){this.huasearchForm.pageNumber=e,this.getHuaUserList(),this.huaclearSelectAll()},huachangePageSize(e){this.huasearchForm.pageSize=e,this.getHuaUserList()},huaAddData(){var e=this;this.huaselectCount<=0?this.$Message.warning("您还未选择要从花名册导入的数据"):this.$Modal.confirm({title:"确认导入",content:"您确认要导入所选的 "+this.huaselectCount+" 条数据?",loading:!0,onOk:()=>{let t="";this.huaselectList.forEach((function(s){t+=s.nickname+",",t=t.substring(0,t.length-1),this.$Modal.remove(),this.$Message.success("导入成功"),this.isImportHuaData=!1,e.form.inPeople=t}))}})},getHuaUserList(){this.hualoading=!0,(0,i.Vv)(this.huasearchForm).then((e=>{this.hualoading=!1,e.success&&(this.huaData=e.result.records,this.huaTotal=e.result.total)}))}},mounted(){this.init()}},l=r;var n=s(1001),m=(0,n.Z)(l,a,o,!1,null,null,null);const c=m.exports},4226:(e,t,s)=>{s.d(t,{Gk:()=>n,IH:()=>u,MK:()=>o,Pd:()=>v,Pl:()=>d,Qb:()=>i,Vv:()=>F,Vz:()=>h,XR:()=>c,X_:()=>k,c1:()=>x,gi:()=>g,gw:()=>r,jv:()=>p,od:()=>y,oq:()=>w,pf:()=>f,rd:()=>m,t5:()=>l,z0:()=>b});var a=s(8571);const o=e=>(0,a.A_)("/adminAssets/getByPage",e),i=e=>(0,a.A_)("/adminAssetsRequest/getByPageApply",e),r=e=>(0,a.j0)("/adminAssetsRequest/outWageApproval",e),l=e=>(0,a.j0)("/adminAssetsRequest/outWageDisapproval",e),n=e=>(0,a.j0)("/adminAssetsRequest/outWage",e),m=e=>(0,a.j0)("/adminAssetsRequest/submitApplyData",e),c=e=>(0,a.A_)("/adminAssetsRequest/getByPageAuditApply",e),u=e=>(0,a.A_)("/adminAssets/getByPageMylist",e),h=e=>(0,a.A_)("/adminAssets/getByPageAuditReturn",e),d=e=>(0,a.j0)("/adminAssets/delByIds",e),p=e=>(0,a.A_)("/user/getUserList",e),f=e=>(0,a.j0)("/adminAssets/return",e),y=e=>(0,a.j0)("/adminAssets/returnReturn",e),g=e=>(0,a.A_)("/adminAssetsRepair/add",e),b=e=>(0,a.j0)("/adminAssets/submitReturnData",e),w=e=>(0,a.j0)("/adminAssetsBuy/insert",e),v=e=>(0,a.j0)("/adminAssetsBuy/update",e),k=e=>(0,a.j0)("/adminAssetsBuy/delByIds",e),x=e=>(0,a.j0)("/adminAssetsBuy/auditData",e),F=e=>(0,a.A_)("/adminAsset/getByPage",e)}}]);