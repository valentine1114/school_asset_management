"use strict";(self["webpackChunktemplate"]=self["webpackChunktemplate"]||[]).push([[6268,677,7405],{2669:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=function(){var e=this,t=e._self._c;return t("div",[t("Card",[t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticClass:"edit-head"},[t("a",{staticClass:"back-title",on:{click:e.close}},[t("Icon",{attrs:{type:"ios-arrow-back"}}),e._v("返回 ")],1),t("div",{staticClass:"head-name"},[e._v("添加")]),t("span"),t("a",{staticClass:"window-close",on:{click:e.close}},[t("Icon",{staticClass:"ivu-icon-ios-close",attrs:{type:"ios-close",size:"31"}})],1)])]),t("Form",{ref:"form",attrs:{model:e.form,"label-width":100,rules:e.formValidate,"label-position":"left"}},[t("FormItem",{attrs:{label:"仓库名称",prop:"name"}},[t("Input",{staticStyle:{width:"570px"},attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("FormItem",{attrs:{label:"仓库地址",prop:"address"}},[t("Input",{staticStyle:{width:"570px"},attrs:{clearable:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),t("FormItem",{attrs:{label:"管理员",prop:"adminName"}},[t("Input",{staticStyle:{width:"570px"},attrs:{readonly:""},model:{value:e.form.adminName,callback:function(t){e.$set(e.form,"adminName",t)},expression:"form.adminName"}}),t("Button",{attrs:{type:"error"},on:{click:e.openUserSelectWindow}},[e._v("选择")])],1),t("FormItem",{attrs:{label:"备注",prop:"remark"}},[t("Input",{staticStyle:{width:"570px"},attrs:{clearable:""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),t("FormItem",{attrs:{label:"状态",prop:"status"}},[t("Select",{staticStyle:{width:"570px"},attrs:{clearable:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[t("Option",{attrs:{value:"0"}},[e._v("正常")]),t("Option",{attrs:{value:"1"}},[e._v("封存")])],1)],1),t("Form-item",{staticClass:"br"},[t("Button",{attrs:{loading:e.submitLoading,type:"primary"},on:{click:e.handleSubmit}},[e._v("提交并保存")]),t("Button",{on:{click:e.handleReset}},[e._v("重置")]),t("Button",{attrs:{type:"dashed"},on:{click:e.close}},[e._v("关闭")])],1)],1)],1),t("userSelect",{on:{submited:e.ownerSubmited},model:{value:e.showOwnerWindowFlag,callback:function(t){e.showOwnerWindowFlag=t},expression:"showOwnerWindowFlag"}})],1)},l=[],r=a(2356),i=a(677);const o={name:"add",components:{userSelect:i["default"]},data(){return{showOwnerWindowFlag:!1,submitLoading:!1,form:{name:"",address:"",adminName:"",remark:"",status:"0"},formValidate:{}}},methods:{init(){},openUserSelectWindow(){this.showOwnerWindowFlag=!0},ownerSubmited(e){this.form.adminId=e.id,this.form.adminName=e.username,this.showOwnerWindowFlag=!1},handleReset(){this.$refs.form.resetFields()},handleSubmit(){this.$refs.form.validate((e=>{e&&(0,r.dl)(this.form).then((e=>{this.submitLoading=!1,e.success&&(this.$Message.success("操作成功"),this.submited())}))}))},close(){this.$emit("close",!0)},submited(){this.$emit("submited",!0)}},mounted(){this.init()}},n=o;var c=a(1001),h=(0,c.Z)(n,s,l,!1,null,null,null);const u=h.exports},677:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=function(){var e=this,t=e._self._c;return t("div",[t("Drawer",{attrs:{title:"导入花名册数据",closable:"",draggable:"",width:"1200"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("car",[t("Row",[t("Form",{ref:"huasearchForm",attrs:{model:e.huasearchForm,inline:"","label-width":70}},[t("Form-item",{attrs:{label:"部门"}},[t("department-choose",{ref:"dep",staticStyle:{width:"600px"},on:{"on-change":e.handleSelectDep}})],1),t("Form-item",{attrs:{label:"姓名"}},[t("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入姓名"},model:{value:e.huasearchForm.username,callback:function(t){e.$set(e.huasearchForm,"username",t)},expression:"huasearchForm.username"}})],1),t("Form-item",{attrs:{label:"工号"}},[t("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入工号"},model:{value:e.huasearchForm.jobnumber,callback:function(t){e.$set(e.huasearchForm,"jobnumber",t)},expression:"huasearchForm.jobnumber"}})],1),t("Form-item",[t("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.huahandleSearch}},[e._v("搜索")]),t("Button",{on:{click:e.huahandleReset}},[e._v("重置")])],1)],1)],1),t("Row",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}]},[t("Alert",{attrs:{"show-icon":""}},[e._v(" 已选择 "),t("span",{staticClass:"select-count"},[e._v(e._s(e.huaselectCount))]),e._v(" 项 "),t("a",{staticClass:"select-clear",on:{click:e.huaclearSelectAll}},[e._v("清空")])])],1),t("Row",[t("Col",{attrs:{span:"24"}},[t("Table",{ref:"table1",attrs:{loading:e.hualoading,border:"",columns:e.userColumns,data:e.huaData,sortable:"custom"},on:{"on-selection-change":e.onSelectionChange,"on-sort-change":e.huachangeSort,"on-row-dblclick":e.huashowHuaSelect}})],1)],1),t("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[t("Page",{attrs:{current:e.huasearchForm.pageNumber,total:e.huaTotal,"page-size":e.huasearchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.huachangePage,"on-page-size-change":e.huachangePageSize}})],1),t("br"),t("Button",{attrs:{type:"primary"},on:{click:e.huashowHuaSelect}},[e._v("确认选择")])],1)],1)],1)},l=[],r=a(2356),i=a(7405);const o={name:"add",components:{departmentChoose:i["default"]},props:{value:{type:Boolean,default:!1},data:{type:Object}},watch:{value(e){this.setCurrentValue(e)},visible(e){this.$emit("input",e)}},data(){return{showValue:!1,visible:this.value,title:"",submitLoading:!1,maxHeight:510,form:{},formValidate:{},roleList:[],userColumns:[{type:"selection",width:60,align:"center"},{title:"姓名",key:"nickname",minWidth:100,sortable:!0},{title:"部门",key:"departmentTitle",minWidth:150,sortable:!0},{title:"手机",key:"mobile",sortable:!0,sortType:"desc",minWidth:100},{title:"性别",key:"sex",sortable:!0,sortType:"desc",minWidth:100}],isImportHuaData:!0,huasearchForm:{pageNumber:1,pageSize:10,username:"",groupId:"",departmentId:""},selectHuaList:[],selectHuaCount:[],huaData:[]}},methods:{onSelectionChange(e){this.selectHuaList=e},init(){this.getHuaUserList()},handleSelectDep(e){var t=this;e.forEach((function(e){t.huasearchForm.departmentId=e.id}))},huashowHuaSelect(){if(0===this.selectHuaList.length)return void this.$Message.warning("请选择至少一个员工");const e=this.selectHuaList[0];this.$emit("submited",e)},setCurrentValue(e){e!==this.visible&&(this.visible=e)},closeWindow(){this.visible=!1},huahandleSearch(){this.huasearchForm.pageNumber=1,this.huasearchForm.pageSize=10,this.getHuaUserList()},huahandleReset(){this.$refs.huasearchForm.resetFields(),this.huasearchForm.nickname="",this.huasearchForm.pageNumber=1,this.huasearchForm.pageSize=10,that.huasearchForm.departmentId="",this.getHuaUserList()},huaclearSelectAll(){this.$refs.table1.selectAll(!1)},huachangePage(e){this.huasearchForm.pageNumber=e,this.getHuaUserList(),this.huaclearSelectAll()},huachangePageSize(e){this.huasearchForm.pageSize=e,this.getHuaUserList()},huaAddData(){var e=this;this.huaselectCount<=0?this.$Message.warning("您还未选择要从花名册导入的数据"):this.$Modal.confirm({title:"确认导入",content:"您确认要导入所选的 "+this.huaselectCount+" 条数据?",loading:!0,onOk:()=>{let t="";this.huaselectList.forEach((function(a){t+=a.nickname+",",t=t.substring(0,t.length-1),this.$Modal.remove(),this.$Message.success("导入成功"),this.isImportHuaData=!1,e.form.inPeople=t}))}})},getHuaUserList(){this.hualoading=!0,(0,r.jv)(this.huasearchForm).then((e=>{this.hualoading=!1,e.success&&(this.huaData=e.result.records,this.huaTotal=e.result.total)}))}},mounted(){this.init()}},n=o;var c=a(1001),h=(0,c.Z)(n,s,l,!1,null,null,null);const u=h.exports},7405:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=function(){var e=this,t=e._self._c;return t("div",[t("Cascader",{attrs:{data:e.department,"load-data":e.loadData,"change-on-select":"",filterable:"",clearable:"",placeholder:"选择部门"},on:{"on-change":e.handleChangeDep},model:{value:e.selectDep,callback:function(t){e.selectDep=t},expression:"selectDep"}})],1)},l=[],r=a(5102);const i={name:"departmentChoose",props:{},data(){return{selectDep:[],department:[]}},methods:{initDepartmentData(){(0,r.E5)().then((e=>{e.success&&(e.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),this.department=e.result)}))},loadData(e,t){e.loading=!0,(0,r.E5)({parentId:e.value}).then((a=>{e.loading=!1,a.success&&(a.result.forEach((function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1==e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)})),e.children=a.result,t())}))},handleChangeDep(e,t){let a="";e&&e.length>0&&(a=e[e.length-1]),this.$emit("on-change",a)},clearSelect(){this.selectDep=[]}},mounted(){this.initDepartmentData()}},o=i;var n=a(1001),c=(0,n.Z)(o,s,l,!1,null,null,null);const h=c.exports},2356:(e,t,a)=>{a.d(t,{L5:()=>o,M1:()=>i,dl:()=>r,eg:()=>l,jv:()=>n});var s=a(8571);const l=e=>(0,s.A_)("/adminAssetWare/getByPage",e),r=e=>(0,s.j0)("/adminAssetWare/insertOrUpdate",e),i=e=>(0,s.j0)("/adminAssetWare/insertOrUpdate",e),o=e=>(0,s.j0)("/adminAssetWare/delByIds",e),n=e=>(0,s.A_)("/user/getUserList",e)}}]);