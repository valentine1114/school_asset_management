"use strict";(self["webpackChunktemplate"]=self["webpackChunktemplate"]||[]).push([[5716],{5716:(t,e,i)=>{i.r(e),i.d(e,{default:()=>p});var n=function(){var t=this,e=t._self._c;return e("div",[e("Button",{on:{click:t.toggleCategory}},[t._v(" 切换到 "+t._s("department"===t.currentCategory?"仓库":"部门")+"分类 ")]),e("div",{attrs:{id:"container"}})],1)},a=[],s=i(1821),r=i(8571);const o=t=>(0,r.A_)("/adminAssets/getAntvVoListByDepartment",t),h=t=>(0,r.A_)("/adminAssets/getAntvVoListByWarehouse",t),l={name:"test-page",components:{},props:{},data(){return{depCountData:[],currentCategory:"department",piePlot:{}}},methods:{init(){this.initAntvFx(),this.getAntvVoListFx()},async toggleCategory(){this.currentCategory="department"===this.currentCategory?"warehouse":"department",await this.getAntvVoListFx(),this.initAntvFx()},async getAntvVoListFx(){try{let t;t="department"===this.currentCategory?await o():await h(),t.success&&(this.depCountData=t.result,this.initAntvFx())}catch(t){console.error("Failed to fetch data:",t)}},renderStatistic(t,e,i){const{width:n,height:a}=(0,s.measureTextWidth)(e,i),r=t/2;let o=1;t<n&&(o=Math.min(Math.sqrt(Math.abs(Math.pow(r,2)/(Math.pow(n/2,2)+Math.pow(a,2)))),1));const h=`width:${t}px;`;return`<div style="${h};font-size:${o}em;line-height:${o<1?1:"inherit"};">${e}</div>`},initAntvFx(){var t=this,e=this.depCountData;this.piePlot&&this.piePlot.destroy&&this.piePlot.destroy(),this.piePlot=new s.Pie("container",{appendPadding:10,data:e,angleField:"value",colorField:"title",radius:1,innerRadius:.64,meta:{value:{formatter:t=>`${t}元`}},label:{type:"inner",offset:"-50%",style:{textAlign:"center"},autoRotate:!1,content:"{value}"},statistic:{title:{offsetY:-4,customHtml:(e,i,n)=>{const{width:a,height:s}=e.getBoundingClientRect(),r=Math.sqrt(Math.pow(a/2,2)+Math.pow(s/2,2)),o=n?n.title:"固定资产金额分布";return t.renderStatistic(r,o,{fontSize:28})}},content:{offsetY:4,style:{fontSize:"32px"},customHtml:(e,i,n,a)=>{const{width:s}=e.getBoundingClientRect(),r=n?` ${n.value}元`:`总计：${a.reduce(((t,e)=>t+e.value),0)}元`;return t.renderStatistic(s,r,{fontSize:32})}}}}),this.piePlot.render()}},mounted(){this.currentCategory="department",this.getAntvVoListFx()}},d=l;var c=i(1001),u=(0,c.Z)(d,n,a,!1,null,"7f497d6a",null);const p=u.exports}}]);